---
number: 12
title: Instrumental Variables
day: 28 april
type: lecture
layout: remark
---

# {{ page.title }} #
# {{ page.day }} #

???

Wooldridge 490-521 (405-436)
Carrubba (2001)
Angrist and Pischke Ch.4 (113-218) and Ch.6 (251-267)
For original article, see: Angrist and Lavy (1999)

IV focuses on estimating a Local Average Treatment Effect (LATE) by finding some real-world randomization to "instrument" for the causal variable

So-called "natural experiments", "regression discontinuity designs", and "interrupted time series" are all basically instrumental variables designs


---
## When do we use instrumental variables?

 1. Measurement error
 
 2. Confounding with unobservables
 
???

Because confounding is with unobserved factors, we can't use regression or matching
 

---
background-image: url(http://i.imgur.com/nq4MsDF.png)


???

Causal graph

In regression and matching, we previously focused on closing backdoor paths.

With IV, we focus on finding a variable that precedes our putatively causal variable and that exogenously influences it.


---
## Carrubba (2001)

 - What is his argument?

--

 - Draw a causal graph of his causal argument.
 
--

 - Share with the person sitting next to you.
 
???

Have everyone come up and draw their graph


---
## Instruments

Instruments have to satisfy two properties:

 1. **Exogeneity**
 
 2. **Relevance**

???

What does **exogeneity** mean?

What does **relevance** mean?

 

---
## Instruments

Instruments have to satisfy two properties:

 1. **Exogeneity**
 
   - `\( Z \)` temporally precedes `\( X \)`
   
   - `\( Cov(Z, \epsilon) = 0 \)`
 
 2. **Relevance**

   - `\( Z \)` related to `\( X \)`
   
   - `\( Cov(Z, X) \neq 0 \)`

 
---
background-image: url(http://i.imgur.com/nq4MsDF.png)

---
background-image: url(http://i.imgur.com/ZPImMQw.png)

---
## Instruments

 - **Exogeneity** is not testable

???

Why? We could test it if we had an unbiased estimate of the error term with which to correlate the instrument. If we think there is unobserved confounding, then `\( \beta_1 \)` is biased due to correlation with the error term and so our estimates of the error terms are also biased.

--

 - **Relevance** is testable

???

Why? How?


---
name: questions
class: middle, center

## Questions?

---
## Carrubba (2001)

 - What are Carrubba's instruments?
 
--

 - Are they relevant?
 
???

Yes, he shows the first stage equation

--

 - Are they exogenous?
 
???

We can't test this but we can discuss his defense and draw our own causal graph

The problem is that party positions and public opinion are likely to be dynamic over-time in a game theoretic way (parties influence opinion and opinion influences positions).

Demographics predict opinion at any point in time meaning they can't be instruments because they open back door paths between opinion and lagged party positions.

A better instrument is one that produces a truly exogenous shock. Example: The Fukushima is an exogenous shock to public opinion on nuclear energy. Problem: it may also have directly affected party positions. It's hard to find an instrument for aggregate opinion (but you might be able to find individual-level instruments).

For this question, it might be better to take a panel data or multi-level modelling approach.

 
---
## IV Estimation

 - Several ways to estimate IV model
 
 - We'll focus on Two-Stage Least Squares (2SLS)
 
???

The reason for this is that 2SLS is flexible to multiple instruments

---
## Two-Stage Least Squares

 - `\( Y = \beta_0 + \beta_1 X_{Confounded} + \epsilon \)`
 
 - Estimate of `\( \beta_1 \)` is biased
 
--

 - `\( X_{Confounded} = \beta_0 + \beta_1 Z_{Instrument} + \nu \)`
 
 - `\( Y = \beta_0 + \beta_1^{2SLS} \hat{X} + \epsilon \)`



---
## 2SLS IV Estimation in Stata

```
quietly reg endogenous instrument
predict fitted

* simple estimation
reg outcome fitted

* estimation with additional covariates
reg outcome fitted covariates
```

---
## Standard Errors

 - Standard errors for IV estimates need to incorporate variance in Z
 
 - So, the doing 2SLS manually produces incorrect SEs

 - Luckily, `ivregress` provides functionality directly:

```
ivregress 2sls outcome covariates (confounded = instrument)

NEED TO HASH OUT FULL EXAMPLE CALL

* option 'first' gives additional output
ivregress 2sls outcome covariates (confounded = instrument), first

```

---
## Discrete outcomes

Binary outcome:

```
ivprobit outcome covariates (confounded = instrument)
```

Count outcome:

```
ivpoisson gmm outcome covariates (confounded = instrument)
```

.footnote[Note: `gmm` is an alternative estimation method to 2SLS.]

---
## Standard Errors

 - SEs are going to be larger in 2SLS than OLS
 
 - We can still use heteroskedasticity-consistent SEs in second stage
 
???

2SLS is less efficient than OLS which means:

 1. If we can eliminate confounding through straight OLS, we should do it
 
 2. If we have to do 2SLS, we need a larger sample size to obtain the same SEs. Thus it's harder to detect significant effects.

Should we use robust SEs in first stage? No, because we don't care about them...they're irrelevant for generating `\( \hat{X} \)`

---
## An Aside

 - Image the confounded variable `\( X \)` is an 0/1 indicator
 
 - Should we use logit/probit to estimate the first stage equation?

???

No. Builds distributional assumptions into our estimate.
 
But Cameron and Trivedi say you can and show you how to do it in Stata.

---
template: questions
 
 
---
## Assessing IV models

 - We can assess IV fit in the same way as in OLS
 
   - Goodness of fit in first stage (relevance)
   - Goodness of fit in second stage

---
## First stage fit in Stata

```
* full first stage results
ivregress 2sls outcome covariates (confounded = instrument), first

* additional first stage fit statistics
estat firststage
```
   
---
## Assessing IV models

 - We can assess IV fit in the same way as in OLS
 
   - Goodness of fit in first stage (relevance)
   - Goodness of fit in second stage

 - Testing for confounding
 
   - Durbin-Wu-Hausman Test
   - Do residuals from the first stage relate to the outcome?

---
## DWH Test in Stata

```
quietly ivregress 2sls outcome covariates (confounded = instrument)
estat endogenous
```



---
template: questions


---
## Instruments
 
 - Credible/strong instruments
 
 - Weak instruments
 
???

Weak instruments give big SEs


---
## How many instruments?

 1. Exactly identified
 
   - Same number of instruments as confounded variables
 
 2. Overidentified
 
   - More instruments than confounded variables
 
 3. Underidentified
 
   - Fewer instruments than confounded variables

???

Realistically it is pretty rare in the published literature to use more than one instrument. This is generally because it's hard to find one instrument, let alone multiple.


---

OVERIDENTIFYING RESTRICTIONS

In Stata:

```
quietly ivregress 2sls outcome covariates (confounded = instrument)
estat overid
```

???



---
## Instruments versus treatments

 - How does an instrument differ from a treatment variable?
 
 - In other words, if instruments are so good why don't we just look at their direct effects on `\( Y \)`?
 
???

Well, technically an instrument should have no direct effect on Y.

And, most instruments (at least in empirical literature) are things we don't actually care about.

If your instrument is actually a randomized experimental treatment, then we may care about it.

---
## IV Checklist

 1. How/why is the instrument exogenous?
 
 2. How strong is the instrument?
 
 3. Are there other possible instruments?

???

Sovey and Green checklist

 1. Instrument must temporally precede the putatively causal variable. There must be no backdoor paths through the instrument to the outcome, nor variables that confound the relationship between the instrument and the putative cause.
 
 2. The instrument must be related to the putative cause.
 
 3. Is this the only available instrument? Are there possibly stronger instruments? What other instruments have been used?




---
template: questions


---
## Activity

 - List of instruments used in published literature
 
 - Assess credibility of the instruments





---
## Forward vs. Backward Causal Inference

 - Forward causal inference
 
 - Backward causal inference
  
???

IV can be used for both


---
## Effect Heterogeneity




---
## Experiments and lotteries as instruments

 - Draft (conscription) lotteries

 - Geographical boundaries

 - Weather
 
 - Natural disasters
 
???


 1. Angrist and Krueger
 
 2. Electoral districts in the United States are redrawn every ten years
 
 3. Weather is exogenous - nothing humans do can cause it (as far as we know).
 
 4. Natural disasters: Fukushima, Hurricanes, Floods
 


---
## Maimonide's Rule
  
  
---
## Problem's with discontinuities

- Compensatory rivalry & equalization

- Campbell's Law:

> The more any quantitative social indicator (or even some qualitative indicator) is used for social decision-making, the more subject it will be to corruption pressures and the more apt it will be to distort and corrupt the social processes it is intended to monitor.

???

 1. Units may behave differently due to their position relative to a threshold, either by trying to be more like the other group or by behaving differently because they know they are being treated. For example: Think about education; teachers in the small class may try harder because they feel like they're expected to do better since they have an easier teaching load. Similarly, those in the large class may try harder to compensate for the fact that they have more students. The discontinuity as instrument thus creates a backdoor path between class size and teacher quality.

 2. Knowing that decisions are based on threshholds, units may attempt to change their position relative to the threshold. Example: If class size determines class size, then parents might try to move their children into the smaller class. The discontinuity thus opens a backdoor path between class size and parental involvement.
 
These are the problems with real-world "quasi-experiments". Discontinuities that appear to be random are often exploited or produce adverse behavior that makes them difficult to exploit for causal inference.

---
## Preview

 - Tomorrow:
   - IV in Stata
   
 - Next week:
   - Missing Data
   
