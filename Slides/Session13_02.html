---
number: 13
title: Missing Data Imputation
day: 6 maj
type: lab
layout: remark
---

# {{ page.title }} #
# {{ page.day }} #

## Data cleaning
## Descriptives for missingness
## Imputation techniques

???

S&#248;nderskov Ch.4 and Ch.7 (60-86, 139-151)



```
* randomly impute from levels of the variable

gen ran= runiform() //gen uniform random variable
sort ran //sorts after ran

levelsof var1,loc(lvl) //creates local macro containing values of var1 - replace var1 with variable name
tab var1 //replace var1 with var name
sca tr = r(r) //gen scalar = number of unique values of var1
loc i = 1 //counter
//gen scalars containg values of var1
foreach lv of loc lvl { 
sca s`i' = `lv' 
loc ++i
}

loc obs = 1 //counter for observation number
gen repvar = . //gen new var to contain values of var1
local i = 1 

while `obs' <= _N { //foreach obs in data
replace repvar = s`i' in `obs' //replaces repvar with succesive values of var1 
loc ++obs //next observation
loc ++i 
if `i' <= tr continue 
else if `i' > tr loc i = 1 
}
clonevar newvar1 = var1 //replace names
replace newvar=repvar if newvar==.
```


```
* random imputation from distribution of observed values
* assumes that missing values are missing completely at random
sort missvar
quietly tab missvar
gen imputedvar = missvar[round((r(N)-1)*uniform(),1)+1]
```

```
* hot deck imputation
sort varlist
edit missingvar varlist
```

```
* regression imputation
reg missvar varlist
predict fitted
gen missvarimputed = missvar
replace missvarimputed = fitted if missvar==.
```